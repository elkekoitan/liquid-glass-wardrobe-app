# Coverage Snapshot – 2025-09-19

- **Command**: `flutter test --coverage`
- **Overall Line Coverage**: 15.04% (hits 1,045 / lines 6,950)

## Lowest Coverage Files
| Coverage | Hits/Lines | Path |
| --- | --- | --- |
| 0.00% | 0 / 80 | lib/core/services/error_service.dart |
| 0.00% | 0 / 33 | lib/models/outfit_layer.dart |
| 0.00% | 0 / 31 | lib/providers/capsule_provider.dart |
| 0.00% | 0 / 58 | lib/widgets/glass_button.dart |
| 0.00% | 0 / 60 | lib/widgets/layout/capsule_quick_picker.dart |
| 0.00% | 0 / 107 | lib/utils/image_utils.dart |
| 0.00% | 0 / 104 | lib/widgets/trends/trend_drop_card.dart |

## Highest Uncovered Line Counts
| Uncovered | Coverage | Path |
| --- | --- | --- |
| 407 | 0.25% | lib/screens/main/home_screen.dart |
| 297 | 1.00% | lib/screens/auth/otp_verification_screen.dart |
| 280 | 1.06% | lib/screens/capsules/capsule_gallery_screen.dart |
| 249 | 0.40% | lib/widgets/outfit_stack.dart |
| 242 | 0.41% | lib/widgets/color_variation_panel.dart |
| 236 | 0.42% | lib/screens/auth/login_screen.dart |
| 233 | 0.43% | lib/screens/auth/profile_setup_screen.dart |
| 200 | 0.50% | lib/screens/auth/register_screen.dart |
| 191 | 34.14% | lib/screens/start_screen.dart |
| 185 | 0.54% | lib/screens/onboarding/onboarding_screen.dart |

## Targeted Test Plan
1. **Trend Pulse Spotlight Widget Tests**
   - Pump home screen spotlight section with mocked `TrendPulseProvider` states (loading/error/ready).
   - Verify CTA navigation callbacks and ticker interactions.
2. **OTP Flow Interaction Tests**
   - Add focused widget test covering digit entry, resend timer, and error recovery to lift coverage in `otp_verification_screen.dart`.
3. **Try-On Session StartScreen Tests**
   - Golden / widget tests for comparison view with session states (busy, error, success) to reduce uncovered lines in `start_screen.dart`.
4. **Capsule Service & Provider**
   - Unit tests for `CapsuleProvider` state transitions (offline seed fallback, personalization filters).
5. **Common Widgets**
   - Snapshot tests for `GlassButton` and `CapsuleQuickPicker` under high-contrast/reduced motion variants.

_Recorded by QA automation task – 2025-09-19._
